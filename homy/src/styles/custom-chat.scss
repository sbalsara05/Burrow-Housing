// fe/src/styles/custom-chat.scss

// Import your theme's variables to use them here
@import '../../public/assets/scss/variables';

/*
 * ===================================================================
 *  STREAM CHAT V2 THEME OVERRIDE FOR BURROW HOUSING
 * ===================================================================
 * This file applies our site's branding to the Stream Chat components.
 * It works by overriding the default CSS variables provided by Stream.
*/

// Apply theme variables to the root chat container
.str-chat__theme-light {
  // --- Font & Text ---
  --str-chat__font-family: #{$main-font}, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  --str-chat__color-text: #{$text-dark};
  --str-chat__color-text-low-emphasis: #{rgba($text-dark, 0.7)};

  // --- Primary Colors (Burrow Orange) ---
  --str-chat__primary-color: #{$color-one};
  --str-chat__primary-color-alpha-15: #{rgba($color-one, 0.15)};
  --str-chat__primary-color-alpha-10: #{rgba($color-one, 0.1)};
  
  // --- Backgrounds ---
  --str-chat__bg-color-main-content: #{$color-three}; // The light pinkish background
  --str-chat__bg-color-main: #ffffff; // Main containers like channel list
  --str-chat__bg-color-hover: #f7f7f7;

  // --- Borders & Shadows ---
  --str-chat__border-color: #e3e1e1;
  --str-chat__channel-list-box-shadow: none;
}

// --- SPECIFIC COMPONENT STYLING ---

// 1. Channel List (Left Sidebar)
.str-chat__channel-list-messenger {
  .str-chat__channel-preview-messenger {
    // Styling for each conversation in the list
    border-radius: 8px;
    margin: 4px 8px;
    transition: background-color 0.2s ease-in-out;
    border-bottom: none !important;

    &:hover {
      background-color: var(--str-chat__bg-color-main-content);
    }
  }

  // Active/selected conversation
  .str-chat__channel-preview-messenger--selected {
    background-color: var(--str-chat__primary-color-alpha-15) !important;
    border-left: 3px solid var(--str-chat__primary-color);
  }

  // Unread message indicator
  .str-chat__channel-preview-messenger--unread .str-chat__unread-badge {
    background-color: var(--str-chat__primary-color) !important;
  }
}

// 2. Message Bubbles
.str-chat__message-simple-text-inner {
  // Common styles for both sent and received bubbles
  border-radius: 20px !important;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

// "My" messages (Sent)
.str-chat__message--me .str-chat__message-simple-text-inner {
  background-color: var(--str-chat__primary-color) !important;
  color: #fff !important;
  border-bottom-right-radius: 4px !important; // Bubble tail
}

// "Their" messages (Received)
.str-chat__message--other .str-chat__message-simple-text-inner {
  background-color: #e9ecef !important; // A light grey for contrast
  color: var(--str-chat__color-text) !important;
  border-bottom-left-radius: 4px !important; // Bubble tail
}

// 3. Message Input Area
.str-chat__input-flat {
  border-radius: 25px;
  background-color: #f7f7f7;
  padding: 8px 15px;

  textarea {
    font-family: var(--str-chat__font-family);
    font-size: 16px;
    &::placeholder {
      color: var(--str-chat__color-text-low-emphasis);
    }
  }
}

// 4. Send Button
.str-chat__send-button {
  background-color: var(--str-chat__primary-color) !important;
  border-radius: 50%;
  width: 38px;
  height: 38px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background-color 0.2s ease;

  svg {
    fill: #fff !important;
    height: 20px;
    width: 20px;
  }

  &:hover {
    background-color: #{$color-two} !important; // Darker orange on hover
  }

  &:disabled {
    background-color: #ccc !important;
  }
}