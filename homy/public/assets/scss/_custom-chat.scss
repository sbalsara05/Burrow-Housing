@import 'variables';

/*
 * ===================================================================
 *  STREAM CHAT V2 THEME OVERRIDE FOR BURROW HOUSING 
 * ===================================================================
 * This file applies our site's branding to the Stream Chat components.
 * By wrapping all rules in `.dashboard-body .str-chat`, we increase specificity
 * to ensure these styles override the library defaults.
*/

.dashboard-body .str-chat {
    // --- Font & Text ---
    --str-chat__font-family: #{$main-font},
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    "Helvetica Neue",
    Arial,
    "Noto Sans",
    sans-serif,
    "Apple Color Emoji",
    "Segoe UI Emoji",
    "Segoe UI Symbol",
    "Noto Color Emoji";
    --str-chat__color-text: #{$text-dark};
    --str-chat__color-text-low-emphasis: #{rgba($text-dark, 0.7)};

    // --- Primary Colors (Burrow Orange) ---
    --str-chat__primary-color: #{$color-one};
    --str-chat__primary-color-alpha-15: #{rgba($color-one, 0.15)};
    --str-chat__primary-color-alpha-10: #{rgba($color-one, 0.1)};

    // --- Backgrounds ---
    --str-chat__bg-color-main-content: #{$color-three}; // The light pinkish background for the message area
    --str-chat__bg-color-main: #ffffff; // Main containers like channel list
    --str-chat__bg-color-hover: #{rgba($color-three, 0.6)}; // Use a subtle version of the main bg for hover

    // --- Borders & Shadows ---
    --str-chat__border-color: #E9E9E9;
    --str-chat__channel-list-box-shadow: none; // Remove default shadow to use the parent's `card-box` shadow


    // --- SPECIFIC COMPONENT STYLING (Now nested under the correct parent) ---

    // 1. Channel List (Left Sidebar)
    .str-chat__channel-list-messenger {
        .str-chat__channel-preview-messenger {
            // Styling for each conversation in the list
            border-radius: 8px;
            margin: 4px 8px;
            transition: background-color 0.2s ease-in-out;
            border-bottom: none !important;

            &:hover {
                background-color: var(--str-chat__bg-color-main-content);
            }
        }

        // Active/selected conversation
        .str-chat__channel-preview-messenger--selected {
            background-color: var(--str-chat__primary-color-alpha-15) !important;
            border-left: 3px solid var(--str-chat__primary-color);
        }

        // Unread message indicator
        .str-chat__channel-preview-messenger--unread .str-chat__unread-badge {
            background-color: var(--str-chat__primary-color) !important;
        }
    }

    // 2. Message Bubbles & Meta
    .str-chat__message-simple-text-inner {
        // Common styles for both sent and received bubbles
        border-radius: 20px !important;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    .str-chat__message-simple__meta {
        font-size: 0.75rem; // Make timestamp/name smaller
        color: var(--str-chat__color-text-low-emphasis);
    }

    // "My" messages (Sent)
    .str-chat__message--me .str-chat__message-simple-text-inner {
        background-color: var(--str-chat__primary-color) !important;
        color: #fff !important;
        border-bottom-right-radius: 4px !important; // Bubble tail
    }

    // "Their" messages (Received)
    .str-chat__message--other .str-chat__message-simple-text-inner {
        background-color: #e9ecef !important; // A light grey for contrast
        color: var(--str-chat__color-text) !important;
        border-bottom-left-radius: 4px !important; // Bubble tail
    }

    // 3. Message Input Area
    .str-chat__input-flat {
        border-radius: 25px;
        background-color: #f7f7f7;
        padding: 8px 15px;
        border: 1px solid transparent;
        transition: all 0.2s ease-in-out;

        &:focus-within {
            background-color: #fff;
            border-color: var(--str-chat__primary-color);
            box-shadow: 0 0 0 3px var(--str-chat__primary-color-alpha-15);
        }

        textarea {
            font-family: var(--str-chat__font-family);
            font-size: 16px;

            &::placeholder {
                color: var(--str-chat__color-text-low-emphasis);
            }
        }
    }

    // 4. Send Button
    .str-chat__send-button {
        background-color: var(--str-chat__primary-color) !important;
        border-radius: 50%;
        width: 38px;
        height: 38px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background-color 0.2s ease;

        svg {
            fill: #fff !important;
            height: 20px;
            width: 20px;
        }

        &:hover {
            background-color: #{$color-two} !important; // Darker orange on hover
        }

        &:disabled {
            background-color: #ccc !important;
        }
    }

    // 5. Custom Channel Header
    .burrow-chat-header {
        display: flex;
        align-items: center;
        padding: 12px 16px;
        border-bottom: 1px solid var(--str-chat__border-color);

        &__left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        &__details {
            display: flex;
            flex-direction: column;
        }

        .str-chat__header-livestream-left--title {
            font-size: 1rem;
            font-weight: 600;
            margin: 0;
            color: var(--str-chat__color-text);
        }

        .burrow-user-link {
            color: inherit;
            text-decoration: none;

            &:hover {
                text-decoration: underline;
            }
        }

        .str-chat__header-livestream-left--subtitle {
            font-size: 0.8rem;
            color: var(--str-chat__color-text-low-emphasis);
            margin: 0;
        }

        .burrow-property-link {
            color: var(--str-chat__primary-color);
            font-weight: 500;
            text-decoration: none;

            &:hover {
                text-decoration: underline;
            }
        }
    }
}